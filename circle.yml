machine:
  node:
    version: 7.2.1
general:
  branches:
    only:
      - master
      - preview
deployment:
  master:
    branch: master
    commands:
      - git config --global user.email "kevin@austincodingacademy.com"
      - git config --global user.name "Kevin Colten"
      - npm run favicon-austin && npm run build-austin && npm run sitemap-austin && npm run deploy-austin
      - rm -rf node_modules/gh-pages/.cache
      - npm run favicon-houston && npm run build-houston && npm run sitemap-houston && npm run deploy-houston
      - rm -rf node_modules/gh-pages/.cache
      - npm run favicon-sanantonio && npm run build-sanantonio && npm run sitemap-sanantonio && npm run deploy-sanantonio
      - rm -rf node_modules/gh-pages/.cache
      - npm run favicon-dallas && npm run build-dallas && npm run sitemap-dallas && npm run deploy-dallas
  preview:
    branch: preview
    commands:
      - git config --global user.email "kevin@austincodingacademy.com"
      - git config --global user.name "Kevin Colten"
      - touch robots.txt && echo "User-agent: *" >> robots.txt && echo "Disallow: /" > robots.txt
      - npm run favicon-austin && npm run build-austin && npm run sitemap-austin && npm run deploy-austin-preview
      - rm -rf node_modules/gh-pages/.cache
      - npm run favicon-houston && npm run build-houston && npm run sitemap-houston && npm run deploy-houston-preview
      - rm -rf node_modules/gh-pages/.cache
      - npm run favicon-sanantonio && npm run build-sanantonio && npm run sitemap-sanantonio && npm run deploy-sanantonio-preview
      - rm -rf node_modules/gh-pages/.cache
      - npm run favicon-dallas && npm run build-dallas && npm run sitemap-dallas && npm run deploy-dallas-preview
